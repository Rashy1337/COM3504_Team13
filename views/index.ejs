<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<body>
  <%- include('partials/_header') %>

  <h1><%= title %></h1>
  <p>Welcome to <%= title %></p>

  <div class="heading">
    <p>Plantfindr is your digital companion for exploring the botanical world. Our progressive web application enables you to record, view, and discuss various plant species with ease. Whether youâ€™re a budding botanist or just curious about the greenery around you, Plantfindr is your gateway to learning more about plants. </p>
  </div>

  <form action="/change-username" method="post" class="change-username-form">
    <label for="newUsername">Change Username:</label><br>
    <input type="text" id="newUsername" name="newUsername" value="<%= user.username %>"><br><br>
    <input type="submit" value="Change Username">
  </form>

  <div class="sort-bar">
    <label for="sort">Sort by:</label>
    <select id="sort">
      <option value="default">Default</option>
      <option value="name-asc">Name (A-Z)</option>
      <option value="name-desc">Name (Z-A)</option>
      <option value="date">Date</option>
      <option value="location">Location</option>
    </select>
  </div>

  <script>
    document.getElementById('sort').addEventListener('change', function() {
      // console.log('Sort value in front-end:', this.value);
      window.location.href = '/?sort=' + this.value;
    });
  </script>

<div class="plant-container">
  <% plants.forEach((plant) => { %>
    <a href="/plant/<%= encodeURIComponent(plant.plantName) %>" class="plant-box">
      <div class="text-container">
        <p>| <%= new Date(plant.dateTime).toLocaleDateString() %></p>
        <h2><%= plant.plantName %></h2>
      </div>
      <% if (plant.plantPhoto) { %>
        <img src="<%= plant.plantPhoto %>" width="200" height="200">
      <% } %>
    </a>
   
  <% }); %>
</div>
</body>
</html>
